<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CloudFileSync - 云文件同步工具配置管理界面">
    <title>CloudFileSync - 配置管理</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="container">
        <!-- 页面头部 -->
        <header class="header">
            <h1>
                <svg class="logo-icon" width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle; margin-right: 12px;">
                    <path d="M40 12H8C6.89543 12 6 12.8954 6 14V38C6 39.1046 6.89543 40 8 40H40C41.1046 40 42 39.1046 42 38V14C42 12.8954 41.1046 12 40 12Z" stroke="url(#paint0_linear)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 12V8C14 6.89543 14.8954 6 16 6H32C33.1046 6 34 6.89543 34 8V12" stroke="url(#paint1_linear)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 24L22 30L34 18" stroke="url(#paint2_linear)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="paint0_linear" x1="6" y1="26" x2="42" y2="26" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#6366f1"/>
                            <stop offset="1" stop-color="#8b5cf6"/>
                        </linearGradient>
                        <linearGradient id="paint1_linear" x1="14" y1="9" x2="34" y2="9" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#6366f1"/>
                            <stop offset="1" stop-color="#8b5cf6"/>
                        </linearGradient>
                        <linearGradient id="paint2_linear" x1="16" y1="24" x2="34" y2="24" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#10b981"/>
                            <stop offset="1" stop-color="#059669"/>
                        </linearGradient>
                    </defs>
                </svg>
                CloudFileSync
            </h1>
            <p class="subtitle">简洁、高效的云文件同步工具</p>
        </header>

        <!-- 服务状态卡片 -->
        <main>
            <section class="card status-card" aria-labelledby="status-title">
                <h2 id="status-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="6" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    服务状态
                </h2>
                <div class="status-info">
                    <div class="status-item">
                        <span class="status-label">运行状态:</span>
                        <span id="serviceStatus" class="status-badge stopped">已停止</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">监听目录:</span>
                        <span id="watchDir" class="status-value">-</span>
                    </div>
                </div>
                <div class="status-actions">
                    <button id="btnStart" class="btn btn-success" aria-label="启动同步服务">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        启动服务
                    </button>
                    <button id="btnStop" class="btn btn-danger" disabled aria-label="停止同步服务">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="6" y="4" width="4" height="16"></rect>
                            <rect x="14" y="4" width="4" height="16"></rect>
                        </svg>
                        停止服务
                    </button>
                </div>
            </section>

            <!-- 基本配置 -->
            <section class="card" aria-labelledby="basic-config-title">
                <h2 id="basic-config-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                    基本配置
                </h2>
                <form id="basicForm" class="form">
                    <div class="form-group">
                        <label for="watchDirInput">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                            </svg>
                            监听目录
                        </label>
                        <div class="input-group">
                            <input type="text" id="watchDirInput" name="watch_dir" placeholder="/path/to/watch" required aria-describedby="watchDirHelp">
                            <input type="file" id="dirSelector" webkitdirectory directory multiple style="display: none;">
                            <button type="button" id="btnBrowse" class="btn btn-secondary" aria-label="选择目录">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                选择
                            </button>
                        </div>
                        <small id="watchDirHelp" class="help-text">选择要监听的本地目录，文件变化将自动同步到云盘</small>
                    </div>

                    <div class="form-group">
                        <label for="delayTime">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            延迟上传时间（秒）
                        </label>
                        <input type="number" id="delayTime" name="delay_time" value="5" min="1" max="60" required aria-describedby="delayTimeHelp">
                        <small id="delayTimeHelp" class="help-text">文件变化后等待多久再上传，避免频繁上传。建议 5-10 秒</small>
                    </div>
                </form>
            </section>

            <!-- 云盘配置 -->
            <section class="card" aria-labelledby="provider-config-title">
                <div class="card-header">
                    <h2 id="provider-config-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
                        </svg>
                        云盘配置
                    </h2>
                    <button id="btnAddProvider" class="btn btn-primary" aria-label="添加新的云盘配置">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        添加云盘
                    </button>
                </div>
                <div id="providersList" class="providers-list" role="list" aria-label="云盘配置列表">
                    <!-- 云盘列表将动态生成 -->
                </div>
            </section>

            <!-- 操作按钮 -->
            <section class="actions" aria-label="配置操作">
                <button id="btnSave" class="btn btn-success btn-large" aria-label="保存当前配置">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                        <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                    保存配置
                </button>
                <button id="btnReset" class="btn btn-secondary btn-large" aria-label="重置为上次保存的配置">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"></polyline>
                        <polyline points="1 20 1 14 7 14"></polyline>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                    </svg>
                    重置
                </button>
            </section>

            <!-- 操作日志 -->
            <section class="card" aria-labelledby="log-title">
                <div class="card-header">
                    <h2 id="log-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                            <polyline points="4 7 4 4 20 4 20 7"></polyline>
                            <line x1="9" y1="20" x2="15" y2="20"></line>
                            <line x1="12" y1="4" x2="12" y2="20"></line>
                        </svg>
                        操作日志
                    </h2>
                    <button id="btnClearLog" class="btn btn-secondary btn-small" aria-label="清空日志">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        清空
                    </button>
                </div>
                <div id="logContainer" class="log-container" role="log" aria-live="polite" aria-label="系统日志">
                    <div class="log-item">
                        <span class="log-time">[系统]</span>
                        <span class="log-message">配置管理界面已加载</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 添加云盘模态框 -->
    <div id="providerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="url(#modal-gradient)" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
                    </svg>
                    添加云盘
                </h3>
                <button class="modal-close" aria-label="关闭对话框">&times;</button>
            </div>
            <form id="providerForm" class="form">
                <div class="form-group">
                    <label for="providerType">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
                        </svg>
                        云盘类型
                    </label>
                    <select id="providerType" name="type" required>
                        <option value="">请选择云盘类型</option>
                        <option value="aliyun">阿里云盘</option>
                        <option value="baidu">百度网盘</option>
                        <option value="115">115网盘</option>
                        <option value="onedrive">OneDrive</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="providerName">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        显示名称
                    </label>
                    <input type="text" id="providerName" name="name" placeholder="例如：我的阿里云盘" required>
                </div>

                <!-- 阿里云盘配置 -->
                <div id="aliyunConfig" class="provider-config" style="display: none;" role="group" aria-labelledby="aliyun-title">
                    <h4 id="aliyun-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        阿里云盘配置
                    </h4>
                    <div class="form-group">
                        <label for="aliyunAccessToken">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            Access Token
                        </label>
                        <input type="password" id="aliyunAccessToken" name="aliyun_access_token" placeholder="输入阿里云盘 access_token">
                    </div>
                    <div class="form-group">
                        <label for="aliyunDriveId">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            Drive ID
                        </label>
                        <input type="text" id="aliyunDriveId" name="aliyun_drive_id" placeholder="输入阿里云盘 drive_id">
                    </div>
                </div>

                <!-- 百度网盘配置 -->
                <div id="baiduConfig" class="provider-config" style="display: none;" role="group" aria-labelledby="baidu-title">
                    <h4 id="baidu-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        百度网盘配置
                    </h4>
                    <div class="form-group">
                        <label for="baiduAccessToken">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            Access Token
                        </label>
                        <input type="password" id="baiduAccessToken" name="baidu_access_token" placeholder="输入百度网盘 access_token">
                    </div>
                </div>

                <!-- 115网盘配置 -->
                <div id="115Config" class="provider-config" style="display: none;" role="group" aria-labelledby="115-title">
                    <h4 id="115-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        115网盘配置
                    </h4>
                    <div class="form-group">
                        <label for="115AccessToken">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            Access Token
                        </label>
                        <input type="password" id="115AccessToken" name="115_access_token" placeholder="输入115网盘 access_token">
                    </div>
                </div>

                <!-- OneDrive配置 -->
                <div id="onedriveConfig" class="provider-config" style="display: none;" role="group" aria-labelledby="onedrive-title">
                    <h4 id="onedrive-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        OneDrive配置
                    </h4>
                    <div class="form-group">
                        <label for="onedriveAccessToken">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            Access Token
                        </label>
                        <input type="password" id="onedriveAccessToken" name="onedrive_access_token" placeholder="输入OneDrive access_token">
                    </div>
                    <div class="form-group">
                        <label for="onedriveRefreshToken">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <polyline points="1 20 1 14 7 14"></polyline>
                                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                            </svg>
                            Refresh Token
                        </label>
                        <input type="password" id="onedriveRefreshToken" name="onedrive_refresh_token" placeholder="输入OneDrive refresh_token（可选）">
                    </div>
                </div>

                <div class="form-group">
                    <label for="providerTarget">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                        </svg>
                        目标目录
                    </label>
                    <input type="text" id="providerTarget" name="target" value="/CloudFileSync" placeholder="云盘中的目标目录">
                    <small class="help-text">文件将上传到此目录</small>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="providerEnable" name="enable" checked>
                        <span>立即启用此云盘</span>
                    </label>
                </div>

                <div class="modal-actions">
                    <button type="button" id="btnVerify" class="btn btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        验证
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                        确定
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
